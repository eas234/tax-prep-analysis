# tax-prep-analysis
Repository for "The Effect of Tax Preparers on the Distribution of COVID-19 Benefits Programs", working paper

## Overview of repository
The repository is structured as follows:

### code
#### analysis
- **clean_data.py**: calls function 'clean_data()' which wraps all of the data cleaning functions defined in data_utils.py. Generates cleaned data files '../data/clean/dat_clean.csv' and '../data/clean/data_clean_agi.csv'
- **plots.py**: generates the 2017-2021 EITC amounts plot (figure 1, '../../results/figures/eitc_amts.png') and the 2021 preparer use heatmap (figure 2, '../../results/figures/prep_use_21_heatmap.png')
- **regs.py**: runs all of the regressions included in the paper and writes regression output tables 2-8 as .tex files to '../../results/tables/'
- **summary_stats.py**: generates table of summary statistics (table 1, '../../results/tables/summ_stats.tex')
#### config
- **data.yaml**: config file which defines a variety of state variables (e.g. inflation multiplier to convert 2017 dollars to 2021 dollars) as well as regression instruments, endogenous variables, and control variables.
#### utils
- **data_utils.py**: defines all of the functions used in data cleaning and analysis. Function descriptions, inputs, and outputs are included in the file.

The following directories are not included in the repository, but are referenced: 

### data
#### raw
Includes raw data files described in 'Data Sources' below
#### clean
Includes clean data files:
- **'dat_clean.csv'**: cleaned data reported at the county level, generated by clean_data.py
- **'data_clean_agi.csv'**: cleaned data reported at the county-by-agi-bin level, generated by clean_data.py
- **'eitc_fig_data.csv'**: self-generated file containing eitc benefits amounts and income thresholds for tax years 2017 and 2021

### results
#### tables
includes .tex and/or .txt files for tables 1-8, generated by summary_stats.py and regs.py
#### figures
includes .png files for figures 1 and 2, generated by plots.py

## Requirements
python>=3.10.12\
geopandas==1.0.1\
linearmodels==6.0\
mapclassify==2.8.0\
matplotlib==3.9.3\
numpy==2.1.3\
pandas==2.2.3\
python_dateutil==2.9.0.post0\
PyYAML==6.0.2\
scipy==1.14.1\
seaborn==0.13.2\
statsmodels==0.14.2

## Data Sources

I compiled the data for this project from the following publicly available sources:

### Census 2017-2021 5-year ACS
[Marital status](https://data.census.gov/table/ACSST5Y2021.S1201?q=marriage%20rate&t=Marital%20Status%20and%20Marital%20History&g=010XX00US$0500000)\
[Educational attainment](https://data.census.gov/table/ACSST5Y2021.S1501?q=marriage%20rate&t=Education&g=010XX00US$0500000)\
[Economic characteristics](https://data.census.gov/table/ACSDP5Y2021.DP03?q=employment&g=010XX00US$0500000)\
[Age, gender, race, and ethnicity](https://data.census.gov/table/ACSDP5YSPT2021.DP05?q=race&t=-02:001:Race%20and%20Ethnicity&g=010XX00US$0500000)

### US county-level shapefiles (for heatmap)
[Download from census.gov](https://www2.census.gov/geo/tiger/GENZ2018/shp/cb_2018_us_county_500k.zip)

### SOI Tax Stats - County Data for TY17 and TY21
[Tax Year 2017](https://www.irs.gov/statistics/soi-tax-stats-county-data-2017)\
[Tax Year 2021](https://www.irs.gov/statistics/soi-tax-stats-county-data-2021)

### USDA 2023 Rural-Urban Continuum Codes
[Download from usda.gov](https://www.ers.usda.gov/webdocs/DataFiles/53251/Ruralurbancontinuumcodes2023.xlsx?v=5941.8)

### ZIP-county crosswalk files
ZIP-county crosswalks are available by year and quarter from HUD. You need to create a user profile in order to download these files, which you can do [here](https://www.huduser.gov/portal/datasets/usps_crosswalk.html). I use the crosswalks from Q1 2017 and Q1 2021.

## Data Dictionary
Below are descriptions of features included in the post-processed data file. For descriptions of features included in the raw data, please refer to the data sources linked above.

'county': 5-digit FIPS county code\
'share_black': percent share of total county residents who are black\
'maj_black': 1-0 indicator of whether total county is majority black\
'share_hisp': percent share of total county residents who are hispanic\
'maj_hisp': 1-0 indicator of whether total county is majority hispanic\
'share_male': percentage share of total county residents who are male\
'adult_pop': number of county residents who are over the age of 20\
'tot_pop': total county population\
'share_elderly': percentage share of county residents over 65\
'child_pop': number of county residents under the age of 20\
'share_college': percentage share of county residents 18+ with bachelor's degree\
'r_lfp': share of county residents 16+ in labor force\
'r_unemp': share of civilian workforce 16+ who are unemployed\
'median_hh_inc': median county-level household income in 2021 dollars\
'r_marriage': percentage share of county residents 15+ who are married\
'hh_inc_pct': percentile rankings of median hh income for in-sample counties\
'share_eip': share of filers reporting <=$200k AGI claiming EIP in TY21\
'mean_eip': per-county average EIP claim amount\
'eip_amount': total EIP spend per county\
'share_eitc_lt_75k(_17)': share of filers reporting <=$75k AGI claiming EITC\
'mean_eitc(_17)': per-county average EITC claim amount. 2021 or 2017 if '_17' is appended.\
'tot_eitc(_17)': total EITC spend per county. 2021 or 2017 if '_17' is appended.\
'share_ctc(_17)': share of filers claiming CTC. 2021 or 2017 if '_17' is appended.\
'tot_ctc(_17)': total CTC spend per county. 2021 or 2017 if '_17' is appended.\
'share_using_pp(_17)': share of returns filed using paid preparer\
'share_ctc_dif': First difference of share of taxpayers claiming CTC between TY21, TY17\
'mean_ctc_dif': First difference of mean CTC claim amounts between TY21, TY17\
'share_eitc_dif': First difference of share of taxpayers claiming EITC between TY21, TY17\
'mean_eitc_dif': First difference of mean EITC claim amounts between TY21, TY17
